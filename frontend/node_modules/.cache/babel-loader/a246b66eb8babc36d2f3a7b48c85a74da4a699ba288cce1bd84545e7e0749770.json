{"ast":null,"code":"/**\n * Authentication Hook\n *\n * Manages user authentication state and actions.\n */import{useState,useEffect,useCallback}from'react';const API_BASE=process.env.REACT_APP_API_URL||'http://localhost:5001/api';export function useAuth(){const[user,setUser]=useState(null);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);// Check for existing session on mount\nuseEffect(()=>{const token=localStorage.getItem('auth_token');const savedUser=localStorage.getItem('user');if(token&&savedUser){try{setUser(JSON.parse(savedUser));}catch(_unused){localStorage.removeItem('auth_token');localStorage.removeItem('user');}}setIsLoading(false);},[]);const login=useCallback(async(email,password)=>{setIsLoading(true);setError(null);try{const response=await fetch(\"\".concat(API_BASE,\"/auth/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:email,password})});if(!response.ok){const data=await response.json();throw new Error(data.error||'Login failed');}const data=await response.json();localStorage.setItem('auth_token',data.access_token);localStorage.setItem('user',JSON.stringify(data.user));setUser(data.user);setIsLoading(false);return true;}catch(err){setError(err instanceof Error?err.message:'Login failed');setIsLoading(false);return false;}},[]);const logout=useCallback(()=>{localStorage.removeItem('auth_token');localStorage.removeItem('user');setUser(null);},[]);return{user,isAuthenticated:!!user,isLoading,login,logout,error};}export default useAuth;","map":{"version":3,"names":["useState","useEffect","useCallback","API_BASE","process","env","REACT_APP_API_URL","useAuth","user","setUser","isLoading","setIsLoading","error","setError","token","localStorage","getItem","savedUser","JSON","parse","_unused","removeItem","login","email","password","response","fetch","concat","method","headers","body","stringify","username","ok","data","json","Error","setItem","access_token","err","message","logout","isAuthenticated"],"sources":["/Users/daringanitch/workspace/Enterprise-OSINT-Platform/frontend/src/hooks/useAuth.ts"],"sourcesContent":["/**\n * Authentication Hook\n *\n * Manages user authentication state and actions.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\n\nexport interface User {\n  id: string;\n  email: string;\n  name: string;\n  role: 'admin' | 'analyst' | 'viewer';\n}\n\nexport interface UseAuthReturn {\n  user: User | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  login: (email: string, password: string) => Promise<boolean>;\n  logout: () => void;\n  error: string | null;\n}\n\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\n\nexport function useAuth(): UseAuthReturn {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Check for existing session on mount\n  useEffect(() => {\n    const token = localStorage.getItem('auth_token');\n    const savedUser = localStorage.getItem('user');\n\n    if (token && savedUser) {\n      try {\n        setUser(JSON.parse(savedUser));\n      } catch {\n        localStorage.removeItem('auth_token');\n        localStorage.removeItem('user');\n      }\n    }\n    setIsLoading(false);\n  }, []);\n\n  const login = useCallback(async (email: string, password: string): Promise<boolean> => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch(`${API_BASE}/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ username: email, password }),\n      });\n\n      if (!response.ok) {\n        const data = await response.json();\n        throw new Error(data.error || 'Login failed');\n      }\n\n      const data = await response.json();\n\n      localStorage.setItem('auth_token', data.access_token);\n      localStorage.setItem('user', JSON.stringify(data.user));\n      setUser(data.user);\n      setIsLoading(false);\n      return true;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Login failed');\n      setIsLoading(false);\n      return false;\n    }\n  }, []);\n\n  const logout = useCallback(() => {\n    localStorage.removeItem('auth_token');\n    localStorage.removeItem('user');\n    setUser(null);\n  }, []);\n\n  return {\n    user,\n    isAuthenticated: !!user,\n    isLoading,\n    login,\n    logout,\n    error,\n  };\n}\n\nexport default useAuth;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}